---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/PageFrame.astro';
import { generateSidebar } from '../utils/sidebarUtils';
import { getPrevNextLinks } from '@astrojs/starlight/utils/navigation';

console.log('components/PageFrame.astro');

const { props } = Astro;
const userRole = Astro.cookies.get('userRole')?.value || 'klient';

console.log('components/PageFrame.astro userRole:', userRole);

const dynamicSidebar = generateSidebar(userRole);

const { prev, next } = getPrevNextLinks(dynamicSidebar, true, {});

const modifiedProps = {
  ...props,
  pagination: { prev, next }
};
---

<Default {...modifiedProps}>
  <slot />
</Default>