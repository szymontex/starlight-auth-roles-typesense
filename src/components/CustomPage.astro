---
import type { Props } from '@astrojs/starlight/props';
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import { generateSidebar } from '../utils/sidebarUtils';

const { props } = Astro;
const userRole = Astro.locals.user?.role || Astro.cookies.get('userRole')?.value || 'klient';

console.log('components/CustomPage.astro: userRole:', userRole);

const dynamicSidebar = generateSidebar(userRole);

const modifiedProps = {
  ...props,
  sidebar: dynamicSidebar
};
---

<StarlightPage {...modifiedProps}>
  <slot />
</StarlightPage>